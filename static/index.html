<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Octra Wallet - Secure & User-Friendly</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .language-selector {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        .language-selector select {
            padding: 8px 12px;
            border: none;
            border-radius: 20px;
            background: rgba(255,255,255,0.9);
            color: #333;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .language-selector select:hover {
            background: white;
            transform: translateY(-2px);
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
        }

        .card h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-success {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
        }

        .btn-danger {
            background: linear-gradient(135deg, #f44336 0%, #da190b 100%);
        }

        .btn-warning {
            background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .wallet-info {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .wallet-info h2 {
            color: white;
            margin-bottom: 20px;
        }

        .info-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }

        .info-item:last-child {
            border-bottom: none;
        }

        .info-label {
            font-weight: 600;
            opacity: 0.9;
        }

        .info-value {
            font-family: 'Courier New', monospace;
            background: rgba(255,255,255,0.1);
            padding: 5px 10px;
            border-radius: 5px;
            word-break: break-all;
        }

        .transaction-history {
            max-height: 400px;
            overflow-y: auto;
        }

        .transaction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid #eee;
            transition: background-color 0.3s ease;
        }

        .transaction-item:hover {
            background-color: #f8f9fa;
        }

        .transaction-item:last-child {
            border-bottom: none;
        }

        .transaction-type {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .transaction-type.in {
            background: #d4edda;
            color: #155724;
        }

        .transaction-type.out {
            background: #f8d7da;
            color: #721c24;
        }

        .address-list {
            max-height: 300px;
            overflow-y: auto;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            padding: 10px;
        }

        .address-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #eee;
            transition: background-color 0.3s ease;
        }

        .address-item:hover {
            background-color: #f8f9fa;
        }

        .address-item:last-child {
            border-bottom: none;
        }

        .address-text {
            font-family: 'Courier New', monospace;
            font-size: 12px;
            color: #666;
            flex: 1;
            margin-right: 10px;
        }

        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-indicator.online {
            background: #4CAF50;
        }

        .status-indicator.offline {
            background: #f44336;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: #e1e5e9;
            border-radius: 3px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            width: 0%;
            transition: width 0.3s ease;
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border-color: #4CAF50;
        }

        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border-color: #f44336;
        }

        .alert-warning {
            background: #fff3cd;
            color: #856404;
            border-color: #ff9800;
        }

        .alert-info {
            background: #d1ecf1;
            color: #0c5460;
            border-color: #17a2b8;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .hidden {
            display: none !important;
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .tooltip {
            position: relative;
            cursor: help;
        }

        .tooltip:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background: #333;
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 12px;
            white-space: nowrap;
            z-index: 1000;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .grid {
                grid-template-columns: 1fr;
            }
            
            .card {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="language-selector">
        <select id="languageSelect">
            <option value="en">ðŸ‡ºðŸ‡¸ English</option>
            <option value="vi">ðŸ‡»ðŸ‡³ Tiáº¿ng Viá»‡t</option>
            <option value="zh">ðŸ‡¨ðŸ‡³ ä¸­æ–‡</option>
            <option value="ja">ðŸ‡¯ðŸ‡µ æ—¥æœ¬èªž</option>
            <option value="ko">ðŸ‡°ðŸ‡· í•œêµ­ì–´</option>
        </select>
    </div>

    <div class="container">
        <div class="header">
            <h1>
                <i class="fas fa-wallet"></i>
                <span data-translate="app_title">Octra Wallet</span>
            </h1>
            <p data-translate="app_subtitle">Secure and user-friendly wallet for Octra network</p>
        </div>

        <div id="alertContainer"></div>

        <div class="grid">
            <!-- Load Wallet Section -->
            <div class="card">
                <h2>
                    <i class="fas fa-key"></i>
                    <span data-translate="load_wallet">Load Wallet</span>
                </h2>
                <div class="form-group">
                    <label for="privateKey" data-translate="private_key_label">Private Key (Base64):</label>
                    <textarea id="privateKey" rows="3" placeholder="Enter your base64 private key here..." data-translate-placeholder="private_key_placeholder"></textarea>
                </div>
                <button class="btn" onclick="loadWallet()">
                    <i class="fas fa-unlock"></i>
                    <span data-translate="load_wallet_btn">Load Wallet</span>
                </button>
            </div>

            <!-- Wallet Info Section -->
            <div class="wallet-info hidden" id="walletInfo">
                <h2>
                    <i class="fas fa-info-circle"></i>
                    <span data-translate="wallet_info">Wallet Information</span>
                </h2>
                <div class="info-item">
                    <span class="info-label" data-translate="address">Address:</span>
                    <span class="info-value" id="walletAddress">-</span>
                </div>
                <div class="info-item">
                    <span class="info-label" data-translate="balance">Balance:</span>
                    <span class="info-value" id="walletBalance">-</span>
                </div>
                <div class="info-item">
                    <span class="info-label" data-translate="nonce">Nonce:</span>
                    <span class="info-value" id="walletNonce">-</span>
                </div>
                <div class="info-item">
                    <span class="info-label" data-translate="pending_txs">Pending Transactions:</span>
                    <span class="info-value" id="pendingTxs">-</span>
                </div>
                <button class="btn btn-success" onclick="refreshWallet()">
                    <i class="fas fa-sync-alt"></i>
                    <span data-translate="refresh">Refresh</span>
                </button>
            </div>
        </div>

        <div class="grid">
            <!-- Send Transaction Section -->
            <div class="card hidden" id="sendSection">
                <h2>
                    <i class="fas fa-paper-plane"></i>
                    <span data-translate="send_transaction">Send Transaction</span>
                </h2>
                <div class="form-group">
                    <label for="recipientAddress" data-translate="recipient_address">Recipient Address:</label>
                    <input type="text" id="recipientAddress" placeholder="oct..." data-translate-placeholder="recipient_placeholder">
                </div>
                <div class="form-group">
                    <label for="sendAmount" data-translate="amount">Amount (OCT):</label>
                    <input type="number" id="sendAmount" step="0.000001" min="0" placeholder="0.000001" data-translate-placeholder="amount_placeholder">
                </div>
                <button class="btn" onclick="sendTransaction()">
                    <i class="fas fa-send"></i>
                    <span data-translate="send_btn">Send</span>
                </button>
            </div>

            <!-- Address Management Section -->
            <div class="card">
                <h2>
                    <i class="fas fa-address-book"></i>
                    <span data-translate="address_management">Address Management</span>
                </h2>
                <div class="form-group">
                    <label for="newAddress" data-translate="new_address">New Address:</label>
                    <input type="text" id="newAddress" placeholder="oct..." data-translate-placeholder="new_address_placeholder">
                </div>
                <button class="btn btn-success" onclick="addAddress()">
                    <i class="fas fa-plus"></i>
                    <span data-translate="add_address">Add Address</span>
                </button>
                <button class="btn btn-warning" onclick="loadAddresses()">
                    <i class="fas fa-download"></i>
                    <span data-translate="load_addresses">Load Addresses</span>
                </button>
                
                <div class="address-list" id="addressList">
                    <div style="text-align: center; color: #666; padding: 20px;" data-translate="no_addresses">
                        No addresses loaded
                    </div>
                </div>
                
                <div style="margin-top: 15px;">
                    <span data-translate="total_addresses">Total addresses:</span>
                    <strong id="addressCount">0</strong>
                </div>
            </div>
        </div>

        <!-- Auto Send Section -->
        <div class="card hidden" id="autoSendSection">
            <h2>
                <i class="fas fa-rocket"></i>
                <span data-translate="auto_send">Auto Send (Sequential)</span>
            </h2>
            <div class="alert alert-info">
                <i class="fas fa-info-circle"></i>
                <span data-translate="auto_send_info">Transactions will be sent one by one to prevent network congestion</span>
            </div>
            
            <div class="form-group">
                <label for="autoSendAmount" data-translate="amount_per_address">Amount per address (OCT):</label>
                <input type="number" id="autoSendAmount" step="0.000001" min="0" value="0.00001" data-translate-placeholder="auto_amount_placeholder">
            </div>
            <div class="form-group">
                <label for="batchDelay" data-translate="delay_between_txs">Delay between transactions (seconds):</label>
                <input type="number" id="batchDelay" step="0.1" min="0.1" value="1.0" data-translate-placeholder="delay_placeholder">
            </div>
            
            <button class="btn btn-warning" onclick="startAutoSend()">
                <i class="fas fa-play"></i>
                <span data-translate="start_auto_send">Start Auto Send</span>
            </button>
            
            <div id="autoSendProgress" class="hidden">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div style="text-align: center; margin-top: 10px;">
                    <span data-translate="progress">Progress:</span>
                    <span id="progressText">0/0</span>
                </div>
            </div>
        </div>

        <!-- Transaction History Section -->
        <div class="card hidden" id="historySection">
            <h2>
                <i class="fas fa-history"></i>
                <span data-translate="transaction_history">Transaction History</span>
            </h2>
            <div class="transaction-history" id="transactionHistory">
                <div style="text-align: center; color: #666; padding: 20px;" data-translate="loading_history">
                    Loading transaction history...
                </div>
            </div>
        </div>
    </div>

    <script>
        // Multi-language support
        const translations = {
            en: {
                app_title: "Octra Wallet",
                app_subtitle: "Secure and user-friendly wallet for Octra network",
                load_wallet: "Load Wallet",
                private_key_label: "Private Key (Base64):",
                private_key_placeholder: "Enter your base64 private key here...",
                load_wallet_btn: "Load Wallet",
                wallet_info: "Wallet Information",
                address: "Address:",
                balance: "Balance:",
                nonce: "Nonce:",
                pending_txs: "Pending Transactions:",
                refresh: "Refresh",
                send_transaction: "Send Transaction",
                recipient_address: "Recipient Address:",
                recipient_placeholder: "oct...",
                amount: "Amount (OCT):",
                amount_placeholder: "0.000001",
                send_btn: "Send",
                address_management: "Address Management",
                new_address: "New Address:",
                new_address_placeholder: "oct...",
                add_address: "Add Address",
                load_addresses: "Load Addresses",
                no_addresses: "No addresses loaded",
                total_addresses: "Total addresses:",
                auto_send: "Auto Send (Sequential)",
                auto_send_info: "Transactions will be sent one by one to prevent network congestion",
                amount_per_address: "Amount per address (OCT):",
                auto_amount_placeholder: "0.00001",
                delay_between_txs: "Delay between transactions (seconds):",
                delay_placeholder: "1.0",
                start_auto_send: "Start Auto Send",
                progress: "Progress:",
                transaction_history: "Transaction History",
                loading_history: "Loading transaction history...",
                wallet_loaded: "Wallet loaded successfully!",
                wallet_load_error: "Failed to load wallet. Please check your private key.",
                invalid_address: "Invalid address format",
                invalid_amount: "Invalid amount",
                transaction_sent: "Transaction sent successfully!",
                transaction_failed: "Transaction failed",
                address_added: "Address added successfully!",
                address_exists: "Address already exists",
                auto_send_started: "Auto send started in background",
                insufficient_balance: "Insufficient balance",
                no_wallet: "Please load your wallet first"
            },
            vi: {
                app_title: "VÃ­ Octra",
                app_subtitle: "VÃ­ Ä‘iá»‡n tá»­ an toÃ n vÃ  dá»… sá»­ dá»¥ng cho máº¡ng Octra",
                load_wallet: "Táº£i VÃ­",
                private_key_label: "KhÃ³a riÃªng (Base64):",
                private_key_placeholder: "Nháº­p khÃ³a riÃªng base64 cá»§a báº¡n táº¡i Ä‘Ã¢y...",
                load_wallet_btn: "Táº£i VÃ­",
                wallet_info: "ThÃ´ng tin VÃ­",
                address: "Äá»‹a chá»‰:",
                balance: "Sá»‘ dÆ°:",
                nonce: "Nonce:",
                pending_txs: "Giao dá»‹ch chá»:",
                refresh: "LÃ m má»›i",
                send_transaction: "Gá»­i giao dá»‹ch",
                recipient_address: "Äá»‹a chá»‰ nháº­n:",
                recipient_placeholder: "oct...",
                amount: "Sá»‘ lÆ°á»£ng (OCT):",
                amount_placeholder: "0.000001",
                send_btn: "Gá»­i",
                address_management: "Quáº£n lÃ½ Ä‘á»‹a chá»‰",
                new_address: "Äá»‹a chá»‰ má»›i:",
                new_address_placeholder: "oct...",
                add_address: "ThÃªm Ä‘á»‹a chá»‰",
                load_addresses: "Táº£i Ä‘á»‹a chá»‰",
                no_addresses: "ChÆ°a cÃ³ Ä‘á»‹a chá»‰ nÃ o",
                total_addresses: "Tá»•ng sá»‘ Ä‘á»‹a chá»‰:",
                auto_send: "Gá»­i tá»± Ä‘á»™ng (Tuáº§n tá»±)",
                auto_send_info: "Giao dá»‹ch sáº½ Ä‘Æ°á»£c gá»­i tá»«ng cÃ¡i má»™t Ä‘á»ƒ trÃ¡nh táº¯c ngháº½n máº¡ng",
                amount_per_address: "Sá»‘ lÆ°á»£ng má»—i Ä‘á»‹a chá»‰ (OCT):",
                auto_amount_placeholder: "0.00001",
                delay_between_txs: "Äá»™ trá»… giá»¯a cÃ¡c giao dá»‹ch (giÃ¢y):",
                delay_placeholder: "1.0",
                start_auto_send: "Báº¯t Ä‘áº§u gá»­i tá»± Ä‘á»™ng",
                progress: "Tiáº¿n Ä‘á»™:",
                transaction_history: "Lá»‹ch sá»­ giao dá»‹ch",
                loading_history: "Äang táº£i lá»‹ch sá»­ giao dá»‹ch...",
                wallet_loaded: "VÃ­ Ä‘Ã£ Ä‘Æ°á»£c táº£i thÃ nh cÃ´ng!",
                wallet_load_error: "KhÃ´ng thá»ƒ táº£i vÃ­. Vui lÃ²ng kiá»ƒm tra khÃ³a riÃªng.",
                invalid_address: "Äá»‹nh dáº¡ng Ä‘á»‹a chá»‰ khÃ´ng há»£p lá»‡",
                invalid_amount: "Sá»‘ lÆ°á»£ng khÃ´ng há»£p lá»‡",
                transaction_sent: "Giao dá»‹ch Ä‘Ã£ Ä‘Æ°á»£c gá»­i thÃ nh cÃ´ng!",
                transaction_failed: "Giao dá»‹ch tháº¥t báº¡i",
                address_added: "Äá»‹a chá»‰ Ä‘Ã£ Ä‘Æ°á»£c thÃªm thÃ nh cÃ´ng!",
                address_exists: "Äá»‹a chá»‰ Ä‘Ã£ tá»“n táº¡i",
                auto_send_started: "Gá»­i tá»± Ä‘á»™ng Ä‘Ã£ báº¯t Ä‘áº§u trong ná»n",
                insufficient_balance: "Sá»‘ dÆ° khÃ´ng Ä‘á»§",
                no_wallet: "Vui lÃ²ng táº£i vÃ­ cá»§a báº¡n trÆ°á»›c"
            },
            zh: {
                app_title: "Octra é’±åŒ…",
                app_subtitle: "Octra ç½‘ç»œçš„å®‰å…¨æ˜“ç”¨é’±åŒ…",
                load_wallet: "åŠ è½½é’±åŒ…",
                private_key_label: "ç§é’¥ (Base64):",
                private_key_placeholder: "åœ¨æ­¤è¾“å…¥æ‚¨çš„ base64 ç§é’¥...",
                load_wallet_btn: "åŠ è½½é’±åŒ…",
                wallet_info: "é’±åŒ…ä¿¡æ¯",
                address: "åœ°å€:",
                balance: "ä½™é¢:",
                nonce: "éšæœºæ•°:",
                pending_txs: "å¾…å¤„ç†äº¤æ˜“:",
                refresh: "åˆ·æ–°",
                send_transaction: "å‘é€äº¤æ˜“",
                recipient_address: "æ”¶æ¬¾åœ°å€:",
                recipient_placeholder: "oct...",
                amount: "é‡‘é¢ (OCT):",
                amount_placeholder: "0.000001",
                send_btn: "å‘é€",
                address_management: "åœ°å€ç®¡ç†",
                new_address: "æ–°åœ°å€:",
                new_address_placeholder: "oct...",
                add_address: "æ·»åŠ åœ°å€",
                load_addresses: "åŠ è½½åœ°å€",
                no_addresses: "æœªåŠ è½½åœ°å€",
                total_addresses: "æ€»åœ°å€æ•°:",
                auto_send: "è‡ªåŠ¨å‘é€ (é¡ºåº)",
                auto_send_info: "äº¤æ˜“å°†é€ä¸ªå‘é€ä»¥é˜²æ­¢ç½‘ç»œæ‹¥å µ",
                amount_per_address: "æ¯ä¸ªåœ°å€çš„é‡‘é¢ (OCT):",
                auto_amount_placeholder: "0.00001",
                delay_between_txs: "äº¤æ˜“é—´å»¶è¿Ÿ (ç§’):",
                delay_placeholder: "1.0",
                start_auto_send: "å¼€å§‹è‡ªåŠ¨å‘é€",
                progress: "è¿›åº¦:",
                transaction_history: "äº¤æ˜“åŽ†å²",
                loading_history: "æ­£åœ¨åŠ è½½äº¤æ˜“åŽ†å²...",
                wallet_loaded: "é’±åŒ…åŠ è½½æˆåŠŸï¼",
                wallet_load_error: "åŠ è½½é’±åŒ…å¤±è´¥ã€‚è¯·æ£€æŸ¥æ‚¨çš„ç§é’¥ã€‚",
                invalid_address: "åœ°å€æ ¼å¼æ— æ•ˆ",
                invalid_amount: "é‡‘é¢æ— æ•ˆ",
                transaction_sent: "äº¤æ˜“å‘é€æˆåŠŸï¼",
                transaction_failed: "äº¤æ˜“å¤±è´¥",
                address_added: "åœ°å€æ·»åŠ æˆåŠŸï¼",
                address_exists: "åœ°å€å·²å­˜åœ¨",
                auto_send_started: "è‡ªåŠ¨å‘é€å·²åœ¨åŽå°å¯åŠ¨",
                insufficient_balance: "ä½™é¢ä¸è¶³",
                no_wallet: "è¯·å…ˆåŠ è½½æ‚¨çš„é’±åŒ…"
            },
            ja: {
                app_title: "Octra ã‚¦ã‚©ãƒ¬ãƒƒãƒˆ",
                app_subtitle: "Octra ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç”¨ã®å®‰å…¨ã§ä½¿ã„ã‚„ã™ã„ã‚¦ã‚©ãƒ¬ãƒƒãƒˆ",
                load_wallet: "ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚’èª­ã¿è¾¼ã‚€",
                private_key_label: "ç§˜å¯†éµ (Base64):",
                private_key_placeholder: "base64 ç§˜å¯†éµã‚’ã“ã“ã«å…¥åŠ›ã—ã¦ãã ã•ã„...",
                load_wallet_btn: "ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚’èª­ã¿è¾¼ã‚€",
                wallet_info: "ã‚¦ã‚©ãƒ¬ãƒƒãƒˆæƒ…å ±",
                address: "ã‚¢ãƒ‰ãƒ¬ã‚¹:",
                balance: "æ®‹é«˜:",
                nonce: "ãƒŠãƒ³ã‚¹:",
                pending_txs: "ä¿ç•™ä¸­ã®å–å¼•:",
                refresh: "æ›´æ–°",
                send_transaction: "å–å¼•ã‚’é€ä¿¡",
                recipient_address: "å—ä¿¡è€…ã‚¢ãƒ‰ãƒ¬ã‚¹:",
                recipient_placeholder: "oct...",
                amount: "é‡‘é¡ (OCT):",
                amount_placeholder: "0.000001",
                send_btn: "é€ä¿¡",
                address_management: "ã‚¢ãƒ‰ãƒ¬ã‚¹ç®¡ç†",
                new_address: "æ–°ã—ã„ã‚¢ãƒ‰ãƒ¬ã‚¹:",
                new_address_placeholder: "oct...",
                add_address: "ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’è¿½åŠ ",
                load_addresses: "ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’èª­ã¿è¾¼ã‚€",
                no_addresses: "ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“",
                total_addresses: "ç·ã‚¢ãƒ‰ãƒ¬ã‚¹æ•°:",
                auto_send: "è‡ªå‹•é€ä¿¡ (é †æ¬¡)",
                auto_send_info: "ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®æ··é›‘ã‚’é˜²ããŸã‚ã€å–å¼•ã¯ä¸€ã¤ãšã¤é€ä¿¡ã•ã‚Œã¾ã™",
                amount_per_address: "ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚ãŸã‚Šã®é‡‘é¡ (OCT):",
                auto_amount_placeholder: "0.00001",
                delay_between_txs: "å–å¼•é–“ã®é…å»¶ (ç§’):",
                delay_placeholder: "1.0",
                start_auto_send: "è‡ªå‹•é€ä¿¡ã‚’é–‹å§‹",
                progress: "é€²è¡ŒçŠ¶æ³:",
                transaction_history: "å–å¼•å±¥æ­´",
                loading_history: "å–å¼•å±¥æ­´ã‚’èª­ã¿è¾¼ã¿ä¸­...",
                wallet_loaded: "ã‚¦ã‚©ãƒ¬ãƒƒãƒˆãŒæ­£å¸¸ã«èª­ã¿è¾¼ã¾ã‚Œã¾ã—ãŸï¼",
                wallet_load_error: "ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ç§˜å¯†éµã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚",
                invalid_address: "ç„¡åŠ¹ãªã‚¢ãƒ‰ãƒ¬ã‚¹å½¢å¼",
                invalid_amount: "ç„¡åŠ¹ãªé‡‘é¡",
                transaction_sent: "å–å¼•ãŒæ­£å¸¸ã«é€ä¿¡ã•ã‚Œã¾ã—ãŸï¼",
                transaction_failed: "å–å¼•ãŒå¤±æ•—ã—ã¾ã—ãŸ",
                address_added: "ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒæ­£å¸¸ã«è¿½åŠ ã•ã‚Œã¾ã—ãŸï¼",
                address_exists: "ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯æ—¢ã«å­˜åœ¨ã—ã¾ã™",
                auto_send_started: "è‡ªå‹•é€ä¿¡ãŒãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§é–‹å§‹ã•ã‚Œã¾ã—ãŸ",
                insufficient_balance: "æ®‹é«˜ä¸è¶³",
                no_wallet: "ã¾ãšã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚’èª­ã¿è¾¼ã‚“ã§ãã ã•ã„"
            },
            ko: {
                app_title: "Octra ì§€ê°‘",
                app_subtitle: "Octra ë„¤íŠ¸ì›Œí¬ë¥¼ ìœ„í•œ ì•ˆì „í•˜ê³  ì‚¬ìš©í•˜ê¸° ì‰¬ìš´ ì§€ê°‘",
                load_wallet: "ì§€ê°‘ ë¡œë“œ",
                private_key_label: "ê°œì¸ í‚¤ (Base64):",
                private_key_placeholder: "ì—¬ê¸°ì— base64 ê°œì¸ í‚¤ë¥¼ ìž…ë ¥í•˜ì„¸ìš”...",
                load_wallet_btn: "ì§€ê°‘ ë¡œë“œ",
                wallet_info: "ì§€ê°‘ ì •ë³´",
                address: "ì£¼ì†Œ:",
                balance: "ìž”ì•¡:",
                nonce: "ë…¼ìŠ¤:",
                pending_txs: "ëŒ€ê¸° ì¤‘ì¸ ê±°ëž˜:",
                refresh: "ìƒˆë¡œ ê³ ì¹¨",
                send_transaction: "ê±°ëž˜ ì „ì†¡",
                recipient_address: "ìˆ˜ì‹ ìž ì£¼ì†Œ:",
                recipient_placeholder: "oct...",
                amount: "ê¸ˆì•¡ (OCT):",
                amount_placeholder: "0.000001",
                send_btn: "ì „ì†¡",
                address_management: "ì£¼ì†Œ ê´€ë¦¬",
                new_address: "ìƒˆ ì£¼ì†Œ:",
                new_address_placeholder: "oct...",
                add_address: "ì£¼ì†Œ ì¶”ê°€",
                load_addresses: "ì£¼ì†Œ ë¡œë“œ",
                no_addresses: "ë¡œë“œëœ ì£¼ì†Œê°€ ì—†ìŠµë‹ˆë‹¤",
                total_addresses: "ì´ ì£¼ì†Œ ìˆ˜:",
                auto_send: "ìžë™ ì „ì†¡ (ìˆœì°¨)",
                auto_send_info: "ë„¤íŠ¸ì›Œí¬ í˜¼ìž¡ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ê±°ëž˜ê°€ í•˜ë‚˜ì”© ì „ì†¡ë©ë‹ˆë‹¤",
                amount_per_address: "ì£¼ì†Œë‹¹ ê¸ˆì•¡ (OCT):",
                auto_amount_placeholder: "0.00001",
                delay_between_txs: "ê±°ëž˜ ê°„ ì§€ì—° (ì´ˆ):",
                delay_placeholder: "1.0",
                start_auto_send: "ìžë™ ì „ì†¡ ì‹œìž‘",
                progress: "ì§„í–‰ë¥ :",
                transaction_history: "ê±°ëž˜ ë‚´ì—­",
                loading_history: "ê±°ëž˜ ë‚´ì—­ì„ ë¡œë“œí•˜ëŠ” ì¤‘...",
                wallet_loaded: "ì§€ê°‘ì´ ì„±ê³µì ìœ¼ë¡œ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!",
                wallet_load_error: "ì§€ê°‘ ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ê°œì¸ í‚¤ë¥¼ í™•ì¸í•˜ì„¸ìš”.",
                invalid_address: "ìœ íš¨í•˜ì§€ ì•Šì€ ì£¼ì†Œ í˜•ì‹",
                invalid_amount: "ìœ íš¨í•˜ì§€ ì•Šì€ ê¸ˆì•¡",
                transaction_sent: "ê±°ëž˜ê°€ ì„±ê³µì ìœ¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤!",
                transaction_failed: "ê±°ëž˜ ì‹¤íŒ¨",
                address_added: "ì£¼ì†Œê°€ ì„±ê³µì ìœ¼ë¡œ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!",
                address_exists: "ì£¼ì†Œê°€ ì´ë¯¸ ì¡´ìž¬í•©ë‹ˆë‹¤",
                auto_send_started: "ìžë™ ì „ì†¡ì´ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹œìž‘ë˜ì—ˆìŠµë‹ˆë‹¤",
                insufficient_balance: "ìž”ì•¡ ë¶€ì¡±",
                no_wallet: "ë¨¼ì € ì§€ê°‘ì„ ë¡œë“œí•˜ì„¸ìš”"
            }
        };

        let currentLanguage = 'en';
        let walletLoaded = false;
        let addresses = [];

        // Initialize language
        function initializeLanguage() {
            const savedLanguage = localStorage.getItem('octra_wallet_language');
            if (savedLanguage && translations[savedLanguage]) {
                currentLanguage = savedLanguage;
                document.getElementById('languageSelect').value = currentLanguage;
            }
            updateLanguage();
        }

        // Update language
        function updateLanguage() {
    const elements = document.querySelectorAll('[data-translate]');
    elements.forEach(element => {
        const key = element.getAttribute('data-translate');
        if (translations[currentLanguage] && translations[currentLanguage][key]) {
            element.textContent = translations[currentLanguage][key];
        }
    });

    // Update placeholder attributes
    const placeholderElements = document.querySelectorAll('[data-translate-placeholder]');
    placeholderElements.forEach(element => {
        const key = element.getAttribute('data-translate-placeholder');
        if (translations[currentLanguage] && translations[currentLanguage][key]) {
            element.placeholder = translations[currentLanguage][key];
        }
    });

    // Update document title
    if (translations[currentLanguage] && translations[currentLanguage]['app_title']) {
        document.title = translations[currentLanguage]['app_title'] + ' - Secure Wallet';
    }

    // Save language preference
    localStorage.setItem('octra_wallet_language', currentLanguage);
}

// Language change event handler
document.getElementById('languageSelect').addEventListener('change', function(e) {
    currentLanguage = e.target.value;
    updateLanguage();
});

// Utility functions for alerts and notifications
function showAlert(message, type = 'info', duration = 5000) {
    const alertContainer = document.getElementById('alertContainer');
    const alertId = 'alert_' + Date.now();
    
    const alertDiv = document.createElement('div');
    alertDiv.id = alertId;
    alertDiv.className = `alert alert-${type} fade-in`;
    alertDiv.innerHTML = `
        <i class="fas fa-${getAlertIcon(type)}"></i>
        ${message}
        <button onclick="closeAlert('${alertId}')" style="float: right; background: none; border: none; font-size: 18px; cursor: pointer;">&times;</button>
    `;
    
    alertContainer.appendChild(alertDiv);
    
    // Auto remove after duration
    setTimeout(() => {
        closeAlert(alertId);
    }, duration);
}

function getAlertIcon(type) {
    const icons = {
        'success': 'check-circle',
        'error': 'exclamation-triangle',
        'warning': 'exclamation-circle',
        'info': 'info-circle'
    };
    return icons[type] || 'info-circle';
}

function closeAlert(alertId) {
    const alert = document.getElementById(alertId);
    if (alert) {
        alert.remove();
    }
}

function translate(key) {
    return translations[currentLanguage] && translations[currentLanguage][key] 
        ? translations[currentLanguage][key] 
        : key;
}

// Main application functions
async function loadWallet() {
    const privateKey = document.getElementById('privateKey').value.trim();
    
    if (!privateKey) {
        showAlert(translate('wallet_load_error'), 'error');
        return;
    }

    try {
        const response = await fetch('/api/load_wallet', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ private_key: privateKey })
        });

        const data = await response.json();

        if (response.ok) {
            walletLoaded = true;
            showAlert(translate('wallet_loaded'), 'success');
            
            // Show wallet sections
            document.getElementById('walletInfo').classList.remove('hidden');
            document.getElementById('sendSection').classList.remove('hidden');
            document.getElementById('autoSendSection').classList.remove('hidden');
            document.getElementById('historySection').classList.remove('hidden');
            
            // Clear private key field for security
            document.getElementById('privateKey').value = '';
            
            // Refresh wallet info
            await refreshWallet();
        } else {
            showAlert(data.detail || translate('wallet_load_error'), 'error');
        }
    } catch (error) {
        showAlert(translate('wallet_load_error') + ': ' + error.message, 'error');
    }
}

async function refreshWallet() {
    if (!walletLoaded) {
        showAlert(translate('no_wallet'), 'warning');
        return;
    }

    try {
        const response = await fetch('/api/wallet');
        const data = await response.json();

        if (response.ok) {
            // Update wallet info
            document.getElementById('walletAddress').textContent = data.address;
            document.getElementById('walletBalance').textContent = data.balance;
            document.getElementById('walletNonce').textContent = data.nonce;
            document.getElementById('pendingTxs').textContent = data.pending_txs;

            // Update transaction history
            updateTransactionHistory(data.transactions);
        } else {
            showAlert(data.detail || 'Failed to refresh wallet', 'error');
        }
    } catch (error) {
        showAlert('Network error: ' + error.message, 'error');
    }
}

async function sendTransaction() {
    if (!walletLoaded) {
        showAlert(translate('no_wallet'), 'warning');
        return;
    }

    const to = document.getElementById('recipientAddress').value.trim();
    const amount = parseFloat(document.getElementById('sendAmount').value);

    if (!to || !to.startsWith('oct')) {
        showAlert(translate('invalid_address'), 'error');
        return;
    }

    if (!amount || amount <= 0) {
        showAlert(translate('invalid_amount'), 'error');
        return;
    }

    try {
        const response = await fetch('/api/send', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ to, amount })
        });

        const data = await response.json();

        if (response.ok) {
            showAlert(translate('transaction_sent') + ` (${data.tx_hash})`, 'success');
            
            // Clear form
            document.getElementById('recipientAddress').value = '';
            document.getElementById('sendAmount').value = '';
            
            // Refresh wallet
            setTimeout(refreshWallet, 2000);
        } else {
            showAlert(data.detail || translate('transaction_failed'), 'error');
        }
    } catch (error) {
        showAlert(translate('transaction_failed') + ': ' + error.message, 'error');
    }
}

async function loadAddresses() {
    try {
        const response = await fetch('/api/load_wallet_addresses');
        const data = await response.json();

        if (response.ok) {
            addresses = data.addresses;
            updateAddressList();
            showAlert(`${translate('load_addresses')} (${data.count})`, 'success');
        } else {
            showAlert(data.detail || 'Failed to load addresses', 'error');
        }
    } catch (error) {
        showAlert('Failed to load addresses: ' + error.message, 'error');
    }
}

async function addAddress() {
    const newAddress = document.getElementById('newAddress').value.trim();
    
    if (!newAddress || !newAddress.startsWith('oct')) {
        showAlert(translate('invalid_address'), 'error');
        return;
    }

    try {
        const response = await fetch('/api/add_address', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ address: newAddress })
        });

        const data = await response.json();

        if (response.ok) {
            showAlert(translate('address_added'), 'success');
            document.getElementById('newAddress').value = '';
            await loadAddresses(); // Reload addresses
        } else {
            if (data.detail && data.detail.includes('already exists')) {
                showAlert(translate('address_exists'), 'warning');
            } else {
                showAlert(data.detail || 'Failed to add address', 'error');
            }
        }
    } catch (error) {
        showAlert('Failed to add address: ' + error.message, 'error');
    }
}

async function removeAddress(address) {
    if (!confirm(`Remove address: ${address}?`)) {
        return;
    }

    try {
        const response = await fetch(`/api/remove_address/${encodeURIComponent(address)}`, {
            method: 'DELETE'
        });

        const data = await response.json();

        if (response.ok) {
            showAlert('Address removed successfully', 'success');
            await loadAddresses(); // Reload addresses
        } else {
            showAlert(data.detail || 'Failed to remove address', 'error');
        }
    } catch (error) {
        showAlert('Failed to remove address: ' + error.message, 'error');
    }
}

async function startAutoSend() {
    if (!walletLoaded) {
        showAlert(translate('no_wallet'), 'warning');
        return;
    }

    if (addresses.length === 0) {
        showAlert('No addresses loaded. Please load addresses first.', 'warning');
        return;
    }

    const amount = parseFloat(document.getElementById('autoSendAmount').value);
    const delay = parseFloat(document.getElementById('batchDelay').value);

    if (!amount || amount <= 0) {
        showAlert(translate('invalid_amount'), 'error');
        return;
    }

    const totalAmount = amount * addresses.length;
    
    if (!confirm(`Send ${amount} OCT to ${addresses.length} addresses?\nTotal: ${totalAmount} OCT`)) {
        return;
    }

    try {
        const response = await fetch('/api/auto_send', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ 
                amount, 
                batch_delay: delay,
                max_concurrent: 1 
            })
        });

        const data = await response.json();

        if (response.ok) {
            showAlert(translate('auto_send_started'), 'info');
            
            // Show progress indicator
            document.getElementById('autoSendProgress').classList.remove('hidden');
            
            // Start monitoring progress (simplified)
            setTimeout(() => {
                refreshWallet();
                document.getElementById('autoSendProgress').classList.add('hidden');
            }, data.estimated_time ? parseFloat(data.estimated_time) * 1000 + 5000 : 30000);
            
        } else {
            if (data.detail && data.detail.includes('Insufficient balance')) {
                showAlert(translate('insufficient_balance'), 'error');
            } else {
                showAlert(data.detail || 'Auto send failed', 'error');
            }
        }
    } catch (error) {
        showAlert('Auto send failed: ' + error.message, 'error');
    }
}

function updateAddressList() {
    const addressList = document.getElementById('addressList');
    const addressCount = document.getElementById('addressCount');
    
    addressCount.textContent = addresses.length;
    
    if (addresses.length === 0) {
        addressList.innerHTML = `
            <div style="text-align: center; color: #666; padding: 20px;">
                ${translate('no_addresses')}
            </div>
        `;
        return;
    }

    addressList.innerHTML = addresses.map((addr, index) => `
        <div class="address-item">
            <span class="address-text">${addr}</span>
            <button class="btn btn-danger" onclick="removeAddress('${addr}')" style="padding: 5px 10px; font-size: 12px;">
                <i class="fas fa-trash"></i>
            </button>
        </div>
    `).join('');
}

function updateTransactionHistory(transactions) {
    const historyContainer = document.getElementById('transactionHistory');
    
    if (!transactions || transactions.length === 0) {
        historyContainer.innerHTML = `
            <div style="text-align: center; color: #666; padding: 20px;">
                No transactions found
            </div>
        `;
        return;
    }

    historyContainer.innerHTML = transactions.map(tx => `
        <div class="transaction-item">
            <div>
                <div style="display: flex; align-items: center; gap: 10px;">
                    <span class="transaction-type ${tx.type}">${tx.type}</span>
                    <strong>${tx.amt} OCT</strong>
                </div>
                <div style="font-size: 12px; color: #666; margin-top: 5px;">
                    ${tx.type === 'out' ? 'To: ' : 'From: '}${tx.to}
                </div>
                <div style="font-size: 11px; color: #999;">
                    ${tx.time} | Hash: ${tx.hash.substring(0, 16)}...
                </div>
            </div>
            <div style="text-align: right;">
                <i class="fas fa-${tx.ok ? 'check-circle' : 'times-circle'}" 
                   style="color: ${tx.ok ? '#4CAF50' : '#f44336'};"></i>
            </div>
        </div>
    `).join('');
}

// Initialize application
document.addEventListener('DOMContentLoaded', function() {
    initializeLanguage();
    loadAddresses(); // Auto-load addresses on startup
    
    // Auto-refresh wallet every 30 seconds if loaded
    setInterval(() => {
        if (walletLoaded) {
            refreshWallet();
        }
    }, 30000);
});

// Keyboard shortcuts
document.addEventListener('keydown', function(e) {
    // Ctrl/Cmd + Enter to send transaction
    if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
        if (document.getElementById('sendSection').style.display !== 'none') {
            sendTransaction();
        }
    }
    
    // Escape to close alerts
    if (e.key === 'Escape') {
        const alerts = document.querySelectorAll('.alert');
        alerts.forEach(alert => alert.remove());
    }
});

